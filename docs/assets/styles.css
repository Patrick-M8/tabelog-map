/* Minimal, crisp UI */
:root{
  --bg:#0b0c10; --panel:#13151a; --card:#181b22; --muted:#9aa3af;
  --txt:#e8eaed; --accent:#7dd3fc; --open:#10b981; --soon:#f59e0b; --closed:#ef4444;
  --chip:#262b35; --chip-br:#2f3542;
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--txt);font:14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, sans-serif}

.topbar{position:sticky;top:0;z-index:1000;background:rgba(19,21,26,.9);backdrop-filter:saturate(120%) blur(6px);border-bottom:1px solid #20232b}
.topbar-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;padding:8px 12px;gap:12px}
.brand{font-weight:700;letter-spacing:.3px}
.controls{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.select{display:flex;align-items:center;gap:6px}
.select select{appearance:none;background:var(--panel);border:1px solid #20232b;color:var(--txt);padding:6px 28px 6px 8px;border-radius:8px;min-width:210px}
.sorts{display:flex;gap:6px}
.sort-btn{background:var(--panel);border:1px solid #20232b;color:var(--txt);padding:6px 10px;border-radius:8px;cursor:pointer}
.sort-btn[aria-pressed="true"]{outline:2px solid var(--accent)}
#locate{background:var(--panel);border:1px solid #20232b;color:var(--txt);padding:6px 10px;border-radius:50%;cursor:pointer}

#layout{max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1.1fr .9fr;gap:12px;padding:12px}
#map{height:calc(100vh - 64px);border-radius:12px;overflow:hidden;border:1px solid #20232b}
#list{display:flex;flex-direction:column;gap:10px;min-height:200px}

.card{display:grid;grid-template-columns:120px 1fr;gap:10px;padding:10px;background:var(--card);border:1px solid #222836;border-radius:12px}
.card .img{width:120px;height:90px;border-radius:10px;background-size:cover;background-position:center;background-color:#111}
.meta{display:flex;flex-direction:column;gap:6px}
.title-row{display:flex;align-items:center;justify-content:space-between;gap:8px}
.name{margin:0;font-size:15px}
.status{font-size:12px;padding:2px 6px;border-radius:999px;border:1px solid #2a313f}
.status.open{background:rgba(16,185,129,.1);border-color:rgba(16,185,129,.4);color:var(--open)}
.status.soon{background:rgba(245,158,11,.1);border-color:rgba(245,158,11,.4);color:var(--soon)}
.status.closed{background:rgba(239,68,68,.1);border-color:rgba(239,68,68,.4);color:var(--closed)}
.today{color:var(--muted);font-size:12px}
.chips{display:flex;flex-wrap:wrap;gap:6px}
.chips .chip{font-size:12px;padding:2px 6px;border-radius:999px;background:var(--chip);border:1px solid var(--chip-br);color:#cfd8e3}
.ratings{display:flex;gap:10px;font-size:12px;color:#cbd5e1}
.links a{color:var(--accent);text-decoration:none;margin-right:10px}
.links a:hover{text-decoration:underline}

@media (max-width: 920px){
  #layout{grid-template-columns:1fr}
  #map{height:360px}
  .card{grid-template-columns:100px 1fr}
  .card .img{width:100px;height:80px}
}
/* Categories details + menu */
.cats { position: relative; }
.cats summary {
  list-style: none; cursor: pointer; background: var(--panel);
  border:1px solid #20232b; color:var(--txt); padding:6px 10px; border-radius:8px;
}
.cats[open] summary { outline:2px solid var(--accent); }
.cats-menu {
  position: absolute; top: calc(100% + 6px); left: 0; z-index: 2000;
  background: var(--panel); border:1px solid #20232b; border-radius:10px; padding:8px;
  width: 280px; max-height: 320px; overflow:auto; box-shadow: 0 8px 24px rgba(0,0,0,.35);
}
.cats-actions { display:flex; gap:6px; margin-bottom:8px; }
.cats-actions button {
  background: var(--card); border:1px solid #20232b; color: var(--txt);
  padding:4px 8px; border-radius:8px; cursor:pointer;
}
.cats-list label { display:flex; justify-content:space-between; gap:8px; padding:4px 2px; }
.cats-list small { color: var(--muted); }

/* Radius control tweaks */
.radius { display:flex; align-items:center; gap:6px; background: var(--panel);
  border:1px solid #20232b; border-radius:8px; padding:4px 8px; }
.radius input[type=range] { vertical-align: middle; }
.radius #radius-val { display:inline-block; min-width: 28px; text-align: right; }
.radius select { background: var(--card); border:1px solid #20232b; color:var(--txt); padding:2px 6px; border-radius:6px; }

/* Sort bar */
.sortbar { display:flex; align-items:center; gap:8px; flex-wrap:wrap }
.sortby { color:#cbd5e1; opacity:.9 }

.toggle { display:flex; align-items:center; gap:6px; margin-left:8px; color:#cbd5e1 }

/* Tighten controls wrapping on small screens */
@media (max-width: 920px){
  .controls { gap: 8px }
  .sortbar { order: 1 }
  .cats { order: 2 }
  .radius { order: 3 }
  #locate { order: 4 }
}

/* flash highlight when jumping from map to card */
.card.flash { animation: cardFlash 1200ms ease-out 1; }
@keyframes cardFlash {
  0% { box-shadow: 0 0 0 rgba(255,255,255,0); }
  10% { box-shadow: 0 0 0 4px rgba(125, 211, 252, .75); }
  100% { box-shadow: 0 0 0 rgba(255,255,255,0); }
}

